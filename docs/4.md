---
title: "P√°gina 4 ‚Äì Experimento de finetune"
permalink: /4/
layout: default
---

<style>
  .wrapper,
  .markdown-body, .inner, #main_content {
    max-width: 90% !important;
    padding: 1rem 2rem !important;
  }
  .markdown-body table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1rem;
  }
  .markdown-body th,
  .markdown-body td {
    border: 1px solid #ccc;
    padding: 0.5rem;
  }
  .markdown-body th {
    background: #f5f5f5;
    text-align: left;
  }
  .experiment-image, 
  .markdown-body img {
    display: block;
    margin: 1.5rem auto;
    max-width: 90%;   /* aumenta a largura m√°xima */
    border: 1px solid #ddd;
    border-radius: 6px;
  }
</style>

# Relat√≥rio de Fine-tuning do F5-TTS

Bem-vindo ao relat√≥rio do meu experimento de *fine-tuning* usando o **F5-TTS** com o corpus em portugu√™s. Reposit√≥rio: https://github.com/SWivid/F5-TTS

---

## üß™ Configura√ß√£o do Ambiente

- **GPU**: NVIDIA RTX 4060 Ti  
- **Driver**: Game Ready mais recente  
- **PyTorch**: 2.4.0 + CUDA 12.4  
- **Dataset**: [TTS-Portuguese-Corpus](https://github.com/Edresson/TTS-Portuguese-Corpus)  
- **Checkpoint Base**: [`firstpixel/F5-TTS-pt-br/model_last.safetensors`](https://huggingface.co/firstpixel/F5-TTS-pt-br)

---

## üìä Metodologia

1. Convers√£o dos √°udios para 24kHz  
2. Gera√ß√£o do `raw.arrow`, `duration.json` e `vocab.txt`  
3. Execu√ß√£o do `finetune_cli.py` com:
   - Epochs: 10 (teste inicial)  
   - Batch size: 1  
   - Mixed Precision: fp16  

---

## üìà Resultados Parciais

Durante o treinamento foram gerados checkpoints salvos em `ckpts/ptbr_char_test/`.

Aqui est√£o alguns exemplos de sa√≠da:

### √Åudio gerado (linkado do reposit√≥rio ou externo)

- üéß [Sample 1](audios/update_1000_gen.wav)  

### Compara√ß√£o entre refer√™ncia e gerado

| Refer√™ncia | Gerado |
|------------|--------|
| ![ref](imgs/update_1000_ref.png) | ![gen](imgs/update_1000_gen.png) |

---

## üñºÔ∏è Prints da aplica√ß√£o

Aqui alguns prints do processo de treino:

![UI F5-TTS](imgs/finetune_f5/1.png)  
*Figura 1: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/2.png)  
*Figura 2: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/3.png)  
*Figura 3: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/4.png)  
*Figura 4: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/5.png)  
*Figura 5: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/6.png)  
*Figura 6: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/7.png)  
*Figura 7: Interface do Gradio usada no treino.*

---

## üöÄ Pr√≥ximos Passos

- Aumentar n√∫mero de √©pocas (>=50)  
- Avaliar m√©tricas de qualidade perceptiva (MOS)  
- Testar vocoder alternativo (BigVGAN)  


## C√≥digo para rodar
``` 
conda create -n f5-tts python=3.10 -y
conda activate f5-tts

pip install --upgrade pip
pip install torch==2.4.0+cu124 torchaudio==2.4.0+cu124 --extra-index-url https://download.pytorch.org/whl/cu124

pip install -e .
pip install accelerate peft datasets gradio librosa soundfile


pip install pandas datasets soundfile librosa pyarrow

f5-tts_finetune-gradio


vocab: data/ptbr_char/vocab.txt
checkpoint: ckpts/ptbr_firstpixel/model_last.safetensors

```