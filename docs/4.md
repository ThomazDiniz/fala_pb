---
title: "PÃ¡gina 4 â€“ Experimento de finetune"
permalink: /4/
layout: default
---

<style>
  .wrapper,
  .markdown-body, .inner, #main_content {
    max-width: 90% !important;
    padding: 1rem 2rem !important;
  }
  .markdown-body table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1rem;
  }
  .markdown-body th,
  .markdown-body td {
    border: 1px solid #ccc;
    padding: 0.5rem;
  }
  .markdown-body th {
    background: #f5f5f5;
    text-align: left;
  }
  .experiment-image {
    display: block;
    margin: 1rem auto;
    max-width: 100%;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
</style>

# RelatÃ³rio de Fine-tuning do F5-TTS

Bem-vindo ao relatÃ³rio do meu experimento de *fine-tuning* usando o **F5-TTS** com o corpus em portuguÃªs. RepositÃ³rio: https://github.com/SWivid/F5-TTS

---

## ðŸ§ª ConfiguraÃ§Ã£o do Ambiente

- **GPU**: NVIDIA RTX 4060 Ti  
- **Driver**: Game Ready mais recente  
- **PyTorch**: 2.4.0 + CUDA 12.4  
- **Dataset**: [TTS-Portuguese-Corpus](https://github.com/Edresson/TTS-Portuguese-Corpus)  
- **Checkpoint Base**: `pt-br/model_last.safetensors`

---

## ðŸ“Š Metodologia

1. ConversÃ£o dos Ã¡udios para 24kHz  
2. GeraÃ§Ã£o do `raw.arrow`, `duration.json` e `vocab.txt`  
3. ExecuÃ§Ã£o do `finetune_cli.py` com:
   - Epochs: 1 (teste inicial)  
   - Batch size: 1  
   - Mixed Precision: fp16  

---

## ðŸ“ˆ Resultados Parciais

Durante o treinamento foram gerados checkpoints salvos em `ckpts/ptbr_char_test/`.

Aqui estÃ£o alguns exemplos de saÃ­da:

### Ãudio gerado (linkado do repositÃ³rio ou externo)

- ðŸŽ§ [Sample 1](audios/update_1000_gen.wav)  

### ComparaÃ§Ã£o entre referÃªncia e gerado

| ReferÃªncia | Gerado |
|------------|--------|
| ![ref](imgs/update_1000_ref.png) | ![gen](imgs/update_1000_gen.png) |

---

## ðŸ–¼ï¸ Prints da aplicaÃ§Ã£o

Aqui alguns prints do processo de treino:

![UI F5-TTS](imgs/finetune_f5/1.png)  
*Figura 1: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/2.png)  
*Figura 2: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/3.png)  
*Figura 3: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/4.png)  
*Figura 4: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/5.png)  
*Figura 5: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/6.png)  
*Figura 6: Interface do Gradio usada no treino.*

![UI F5-TTS](imgs/finetune_f5/7.png)  
*Figura 7: Interface do Gradio usada no treino.*

---

## ðŸš€ PrÃ³ximos Passos

- Aumentar nÃºmero de Ã©pocas (>=50)  
- Avaliar mÃ©tricas de qualidade perceptiva (MOS)  
- Testar vocoder alternativo (BigVGAN)  


## CÃ³digo para rodar
``` 
conda create -n f5-tts python=3.10 -y
conda activate f5-tts

pip install --upgrade pip
pip install torch==2.4.0+cu124 torchaudio==2.4.0+cu124 --extra-index-url https://download.pytorch.org/whl/cu124

pip install -e .
pip install accelerate peft datasets gradio librosa soundfile


pip install pandas datasets soundfile librosa pyarrow

f5-tts_finetune-gradio


vocab: data/ptbr_char/vocab.txt
checkpoint: ckpts/ptbr_firstpixel/model_last.safetensors

```